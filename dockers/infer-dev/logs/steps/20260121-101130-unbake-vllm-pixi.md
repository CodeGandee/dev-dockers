# Step log: unbake vLLM Pixi artifacts from `infer-dev`

## Goal

Ensure `dockers/infer-dev/installation/stage-2/custom/` contains only scripts (no large binary artifacts), and prevent Pixi runtime/build artifacts from being baked into `infer-dev:stage-2`.

## What changed

- Removed the accidental Pixi environment directory under the template:
  - Deleted `dockers/infer-dev/installation/stage-2/custom/vllm-pixi-template/.pixi/` (previously ~12GB).
- Moved the vLLM Pixi template out of `custom/` into `utilities/`:
  - Template now lives at `dockers/infer-dev/installation/stage-2/utilities/vllm-pixi-template/`.
- Updated default template paths:
  - `dockers/infer-dev/host-scripts/build-vllm-bundle.sh` now defaults to `installation/stage-2/utilities/vllm-pixi-template`.
  - `dockers/infer-dev/installation/stage-2/custom/install-vllm-offline.sh` now defaults to `/pei-from-host/stage-2/utilities/vllm-pixi-template`.
- Updated host bundling workflow to keep the template directory clean:
  - `dockers/infer-dev/host-scripts/build-vllm-bundle.sh` now copies `pixi.toml`/`pixi.lock` into a temp working dir under `.container/workspace/.tmp/` before running `pixi lock`, `pixi run verify`, and `pixi-pack`.
- Added Docker build-context exclusions:
  - Added `dockers/infer-dev/.dockerignore` to exclude `.container/`, `**/.pixi/`, and common caches from the build context.

## Validation

- Rebuilt the image:
  - `cd dockers/infer-dev && docker compose build stage-2`
- Verified the image size dropped:
  - Before: `infer-dev:stage-2` was `22.4GB`
  - After: `infer-dev:stage-2` is `9.84GB`

